name: Debug Param Check

on:
  workflow_dispatch:
    inputs:
      dummy:
        description: "Manual trigger"
        required: false
  push:
    paths:
      - "scripts/debug_param_check.py"
      - ".github/workflows/debug_param_check.yml"
      - "config/p5_config.yaml"
      - "requirements.txt"

jobs:
  param-check:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ æ£€å‡ºä»“åº“
        uses: actions/checkout@v4

      - name: Debug Timezone Info
        run: |
          echo "==== ğŸ•’ å½“å‰æ—¶é—´æ£€æŸ¥ ===="
          echo "âœ… å½“å‰ UTC æ—¶é—´: $(date -u '+%Y-%m-%d %H:%M:%S')"
          echo "âœ… å½“å‰ åŒ—äº¬æ—¶é—´: $(TZ='Asia/Shanghai' date '+%Y-%m-%d %H:%M:%S')"
          echo "========================"

      - name: ğŸ è®¾ç½® Python 3.11
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      - name: ğŸ§© å®‰è£… debug ä¾èµ–
        run: |
          python -m pip install --upgrade pip
          pip install psutil pyyaml

      - name: âš™ï¸ å‚æ•°ç±»å‹è°ƒè¯•ï¼ˆALL_MODE_LIMIT=Noneï¼‰
        run: python scripts/debug_param_check.py
        env:
          # âœ… ä¸ä¼  ALL_MODE_LIMITï¼Œç­‰ä»·äº NoneType
          LOOKBACK_N: 0
          ENABLE_SHA1: "[]"
          ENABLE_DINGWEI_SHA: "False"
          # ğŸ”‘ éœ€è¦å¯ä»¥åœ¨è¿™é‡Œè¿½åŠ æ›´å¤šç¯å¢ƒå˜é‡
